---
title: "Static Global"
date: December 7, 2020
output: github_document
---

```{r, message=FALSE, warning=FALSE}
library(tidyverse)
library(rvest)
library(lubridate)
library(knitr)
library(zoo)
library(maps)
library(ggplot2)
library(stringr)
library(dplyr)
library(ggrepel)
library(ggthemes)
```

##Overview, Motivation, and Related Work

While the COVID-19 pandemic marches on, there continues to be a dearth of evidence that illustrates **how SARS-CoV-2 impacts men and women differently, and why these trends might vary over space.** When data first emerged from China, the virus was dubbed “a man killer,” for men were 2.4 times as likely to die from the virus. A similar trend was then observed in Italy, where a disproportionate amount of men were dying from the virus (men were representing over 70% of the deaths). Initial hypotheses for the observed health outcomes ran the gamut from differences in smoking and health-seeking behaviors to immunological differences and variances in ACE 2 receptors for the coronavirus. 

As COVID-19 continued to spread, researchers and journalists began to investigate other gendered impacts of the pandemic. After studying the rise in domestic abuse, caregiving and homeschooling responsibilities, and exposure to the virus through over-representation in ‘essential work,’ many have determined that the virus was indeed exacerbating inequities and a “disaster for feminism.” The problem, at that time, was that the paucity of sex-disaggregated data made this difficult to prove and nearly impossible to act on.

The good news, according to Global Health 5050, is that in recent months, more and more countries (now 79) have begun to **report sex-disaggregated case and mortality data** -- acknowledging that this is integral to understanding the virus and informing a strong COVID-19 response. While the prevailing hypothesis today is that more men die from COVID-19 even if and when more women are exposed, this trend is not ubiquitous (in Vietnam, for example, just 37% of the deaths are male, compared to Bangladesh where this number is 77%). **This project seeks to illustrate the observed differences, and explore potential factors that could explain what we are witnessing globally and in the US.**

This project was inspired by the [Global Health 5050](https://globalhealth5050.org/) , as well as the work out of [Harvard’s GenderSci Lab](https://www.genderscilab.org/gender-and-sex-in-covid19). 

*Note: sex-disaggregated data does not report or account for gender identity, therefore data are absent on the impact of COVID-19 on transgender and non-binary people. Some efforts are underway to redress this gap, but for the scope of this project we will use and sex and gender interchangeably.* 

###Plot for Global Case Data

This plot gives a sense how the ratio of male to female COVID-19 cases differs across by Region. While overall there have been more male cases where sex-disaggregated data is available, this plot shows that a cluster of European countries have observed more female cases and a cluster of Asian countries are at the other extreme. However, because we are looking at ratios, a scatterplot has limited value. The next visualizations attempt to provide a more granular understanding of global trends.

```{r}

#Loading and cleaning global data

global_data = read_csv("global5050_clean.csv")
countries = read_csv("Country_Region_data.csv")

global_cases <- select(global_data, "Country code", "Country", "Cases (% male)", "Cases (% female)") %>%
  drop_na() %>%
  rename(male = 'Cases (% male)') %>%
  rename(female = 'Cases (% female)') %>%
  rename(code = 'Country code')
  
global_cases <- left_join(global_cases, countries)

```
```{r}

#Scatterplot for Global Case Data

confirmed_cases = read_csv("Global Confirmed cases.csv")

confirmed_cases <- select(confirmed_cases, "country", "male", "female") %>%
  rename(Country = 'country')

confirmed_cases <- left_join(confirmed_cases, countries)
confirmed_cases <- select(confirmed_cases, "Country", "male", "female", "Region")

c <- confirmed_cases %>% 
  ggplot(aes(male, female, label = "")) +
  geom_text_repel() +
  xlab("Cases % Male") +
  ylab("Cases % Female") +
  xlim(0,100) +
  ylim(0,100) +
  ggtitle("Global COVID-19 Case Data Disaggregated by Sex") + 
  theme_economist()

c + geom_point(aes(color = Region), size = 3)


```

```{r}

#Global Deaths Scatterplot

global_deaths = read_csv("Global Deaths.csv")

global_deaths <- select(global_deaths, "country", "male", "female") %>%
  rename(Country = 'country')

global_deaths <- left_join(global_deaths, countries)
global_deaths <- select(global_deaths, "Country", "male", "female", "Region")
global_deaths <- subset(global_deaths, global_deaths$male!=0.00 & global_deaths$female!=0.00)

d <- global_deaths %>% 
  ggplot(aes(male, female, label = "")) +
  geom_text_repel() +
  xlab("Deaths % Male") +
  ylab("Deaths % Female") +
  ggtitle("Global COVID-19 Death Data Disaggregated by Sex") + 
  xlim(0,100) +
  ylim(0,100) +
  theme_economist()
  

d + geom_point(aes(color = Region), size = 3)
```

```{r}

#Stacked Bar Chart for Global Cases - FIX
confirmed_cases = read_csv("Global Confirmed cases.csv")

confirmed_cases <- select(confirmed_cases, "country", "male", "female") %>%
  rename(Country = 'country')

confirmed_cases <- left_join(confirmed_cases, countries)
confirmed_cases <- select(confirmed_cases, "Country", "male", "female", "Region")
  

confirmed_cases %>%
  mutate(Country = reorder(Country, male)) %>%
  ggplot(aes(Country, male)) + 
  geom_bar(stat = "identity", position = "stack", fill = "#5EC8F0", col = "black", width = 0.1) +
  coord_flip() +
  xlab("") +
  ylab("Confirmed COVID-19 Cases Sex Ratios") +
  ggtitle("Global COVID-19 Case Data Disaggregated by Sex") +
  theme(axis.text.x = element_text(angle = 90, hjust = 0.5))

```

```{r}

#Stacked Bar Chart for Global Deaths - FIX 
global_deaths = read_csv("Global Deaths.csv")

global_deaths <- select(global_deaths, "country", "male", "female") %>%
  rename(Country = 'country')

global_deaths <- left_join(global_deaths, countries)
global_deaths <- select(global_deaths, "Country", "male", "female", "Region")
  

global_deaths %>%
  mutate(Country = reorder(Country, male)) %>%
  ggplot(aes(Country, male)) + 
  geom_bar(stat = "identity", position = "stack", fill = "#5EC8F0", col = "black", width = 0.1) +
  coord_flip() +
  xlab("") +
  ylab("Confirmed COVID-19 Deaths Sex Ratios") +
  ggtitle("Global COVID-19 Death Data Disaggregated by Sex") +
  theme(axis.text.x = element_text(angle = 90, hjust = 0.5))

```


```{r}
#Number of Countries with Sex-Disaggregated COVID-19 Data 
global_data <- select(global_data, "Case & death data by sex?") %>%
  rename(reporting = 'Case & death data by sex?')

sum(global_data$reporting == "Yes")
sum(global_data$reporting == "No")
sum(global_data$reporting == "Partial")

```
According to Global Health 5050, as of December, there are 85 countries reporting complete sex-disaggregated COVID-19 data, 48 countries reporting partial data and 53 countries reporting no sex-disaggregated COVID-19 data.